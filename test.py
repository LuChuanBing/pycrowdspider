# coding=gbk
from helper import OCRHelper
import setting
from downloader import downloader
import threading

# print(setting.ocr_dir + '/')
# OCRHelper.recognize_img_to_string(setting.ocr_dir + '/')

import re
_str = "111.7.130.101:8080@HTTP#[高匿]河南省洛阳市 移动47.105.141.96:80@HTTP#[未知]浙江省杭州市 阿里云47.105.122.17:80@HTTP#[未知]浙江省杭州市 阿里云47.105.129.218:80@HTTP#[未知]浙江省杭州市 阿里云47.105.130.170:80@HTTP#[未知]浙江省杭州市 阿里云47.105.83.48:80@HTTP#[未知]浙江省杭州市 阿里云94.130.20.85:31288@HTTP#[普匿]广东省广州市 电信47.105.130.204:80@HTTP#[未知]浙江省杭州市 阿里云180.210.206.55:3130@HTTP#[透明]河北省邢台市 电信47.105.82.16:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.151:80@HTTP#[未知]浙江省杭州市 阿里云120.27.19.114:80@HTTP#[未知]浙江省杭州市 阿里巴巴网络有限公司BGP数据中心(BGP)47.105.74.131:80@HTTP#[未知]浙江省杭州市 阿里云47.105.90.134:80@HTTP#[未知]浙江省杭州市 阿里云74.126.124.197:50464@HTTP#[未知]浙江省宁波市 电信47.105.75.186:80@HTTP#[未知]浙江省杭州市 阿里云47.104.230.18:80@HTTP#[未知]山东省青岛市 阿里云123.207.30.131:80@HTTP#[未知]广东省广州市 腾讯云47.105.137.242:80@HTTP#[未知]浙江省杭州市 阿里云47.105.89.131:80@HTTP#[透明]浙江省杭州市 阿里云47.105.137.31:80@HTTP#[透明]浙江省杭州市 阿里云47.105.137.85:80@HTTP#[未知]浙江省杭州市 阿里云47.105.139.84:80@HTTP#[未知]浙江省杭州市 阿里云60.13.156.45:8060@HTTP#[普匿]新疆哈密地区哈密市 联通47.105.141.107:80@HTTP#[未知]浙江省杭州市 阿里云204.29.115.149:8080@HTTP#[透明]广东省云浮市 电信123.31.47.8:3128@HTTP#[高匿]浙江省 电信中心网络47.105.128.186:80@HTTP#[未知]浙江省杭州市 阿里云47.105.129.95:80@HTTP#[未知]浙江省杭州市 阿里云123.120.86.142:8060@HTTP#[普匿]北京市 联通125.74.1.21:80@HTTP#[普匿]甘肃省兰州市城关区 电信47.105.90.4:80@HTTP#[未知]浙江省杭州市 阿里云47.105.66.43:80@HTTP#[未知]浙江省杭州市 阿里云47.104.240.231:80@HTTP#[未知]山东省青岛市 阿里云47.105.92.158:80@HTTP#[透明]浙江省杭州市 阿里云47.104.236.108:80@HTTP#[未知]山东省青岛市 阿里云47.105.129.175:80@HTTP#[未知]浙江省杭州市 阿里云47.104.222.190:80@HTTP#[未知]山东省青岛市 阿里云47.105.135.121:80@HTTP#[未知]浙江省杭州市 阿里云219.141.153.43:80@HTTP#[高匿]北京市 电信140.143.105.246:80@HTTP#[透明]中国114.215.174.227:8080@HTTP#[普匿]浙江省杭州市 阿里云BGP数据中心118.24.89.122:1080@HTTP#[未知]广西柳州市高新区 视虎科技有限公司47.105.129.61:80@HTTP#[透明]浙江省杭州市 阿里云47.105.137.187:80@HTTP#[透明]浙江省杭州市 阿里云218.106.98.166:53281@HTTP#[未知]江苏省扬州市 联通47.105.137.254:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.191:80@HTTP#[未知]浙江省杭州市 阿里云27.208.64.146:8060@HTTP#[普匿]山东省威海市 联通110.188.0.56:47830@HTTP#[未知]四川省成都市 电信223.96.95.229:3128@HTTP#[普匿]山东省 移动118.190.217.182:80@HTTP#[未知]北京市 八方电信工程(集团)有限公司47.105.86.152:80@HTTP#[未知]浙江省杭州市 阿里云119.23.226.168:80@HTTP#[未知]广东省深圳市 阿里云221.2.174.3:8060@HTTP#[普匿]山东省威海市 联通47.105.139.226:80@HTTP#[未知]浙江省杭州市 阿里云27.46.32.109:9797@HTTP#[未知]广东省深圳市 联通47.104.237.86:80@HTTP#[未知]山东省青岛市 阿里云118.190.95.43:9001@HTTP#[高匿]北京市 八方电信工程(集团)有限公司61.150.113.74:8908@HTTP#[普匿]陕西省安康市 电信47.105.140.77:80@HTTP#[未知]浙江省杭州市 阿里云60.11.231.74:80@HTTP#[普匿]黑龙江省七台河市 联通47.105.137.15:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.134:80@HTTP#[未知]浙江省杭州市 阿里云47.105.134.241:80@HTTP#[透明]浙江省杭州市 阿里云47.105.135.78:80@HTTP#[未知]浙江省杭州市 阿里云47.105.94.175:80@HTTP#[未知]浙江省杭州市 阿里云47.105.141.175:80@HTTP#[未知]浙江省杭州市 阿里云122.152.219.158:8080@HTTP#[高匿]北京市 歌华有线47.105.123.133:80@HTTP#[未知]浙江省杭州市 阿里云47.105.138.97:80@HTTP#[未知]浙江省杭州市 阿里云47.105.76.217:80@HTTP#[透明]浙江省杭州市 阿里云27.203.210.160:8060@HTTP#[普匿]山东省威海市 联通61.150.113.27:8908@HTTP#[普匿]陕西省安康市 电信47.105.130.29:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.158:80@HTTP#[未知]浙江省杭州市 阿里云47.105.130.70:80@HTTP#[未知]浙江省杭州市 阿里云49.51.70.42:1080@HTTP#[未知]上海市浦东新区 盛大计算机(上海)有限公司47.105.132.146:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.45:80@HTTP#[未知]浙江省杭州市 阿里云119.180.174.47:8060@HTTP#[普匿]山东省 联通111.20.215.226:8060@HTTP#[普匿]陕西省西安市 移动47.105.140.221:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.109:80@HTTP#[未知]浙江省杭州市 阿里云47.105.88.206:80@HTTP#[未知]浙江省杭州市 阿里云47.105.138.113:80@HTTP#[未知]浙江省杭州市 阿里云47.105.137.52:80@HTTP#[透明]浙江省杭州市 阿里云121.8.98.197:80@HTTP#[高匿]广东省广州市 电信119.180.179.53:8060@HTTP#[普匿]山东省 联通47.105.117.178:80@HTTP#[未知]浙江省杭州市 阿里云47.105.138.47:80@HTTP#[未知]浙江省杭州市 阿里云47.105.136.97:80@HTTP#[透明]浙江省杭州市 阿里云121.40.183.166:80@HTTP#[普匿]浙江省杭州市 阿里巴巴网络有限公司BGP数据中心47.105.84.240:80@HTTP#[透明]浙江省杭州市 阿里云47.105.128.64:80@HTTP#[未知]浙江省杭州市 阿里云103.233.157.235:53281@HTTP#[未知]北京市195.208.172.70:8080@HTTP#[高匿]江苏省徐州市 电信221.14.140.66:80@HTTP#[透明]河南省周口市 联通221.194.108.8:8060@HTTP#[普匿]河北省唐山市 联通47.104.194.254:80@HTTP#[未知]山东省青岛市 阿里云"
_regex = '\d+\.\d+\.\d+\.\d+:\d+@HTTPS{0,1}'
proxies_text = re.findall(_regex, _str)
for proxy_text in proxies_text:
    ip = proxy_text.split(':')[0]
    port = proxy_text.split(':')[1].split('@')[0]
    protocol = proxy_text.split(':')[1].split('@')[1]
    proxy_addr = protocol + '://' + ip + ':' + port
    print(proxy_addr)
